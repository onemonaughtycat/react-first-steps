{"version":3,"sources":["Menu.js","pages/Hello.js","pages/Fox.js","pages/Minesweeper/Status.js","pages/Minesweeper/Difficulty.js","pages/Minesweeper/Bar.js","pages/Minesweeper/Icons.js","pages/Minesweeper/Click.js","pages/Minesweeper/Square.js","pages/Minesweeper/Board.js","pages/Minesweeper/Logic.js","pages/Minesweeper/Game.js","pages/index.js","pages/Minesweeper/index.js","Page.js","App.js","index.js"],"names":["Menu","props","state","selected","handleClick","bind","e","i","target","parentNode","children","length","this","setState","onItemClick","outerText","ids","map","id","className","onClick","React","Component","Hello","Fox","Status","running","lose","win","Difficulty","name","options","width","height","bombsCount","Bar","expanded","handleRestartClick","onRestartClick","handleOptionsClick","handleInputChange","value","handleSelectChange","filter","it","message","status","expandable","onChange","type","Icons","bomb","mark","helper","exploded","Click","openSquare","setMark","openNearSquares","Square","handleContextMenu","preventDefault","handleMouseDown","buttons","handleMouseUp","onSquareClick","handleTouchStart","_timeStamp","timeStamp","handleTouchEnd","diff","isOpened","push","withBomb","nearBombsCount","isMarked","join","onContextMenu","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","Board","handleSquareClick","click","square","data","row","y","x","Logic","board","Array","fill","_","Math","floor","random","count","doWithNearSquares","sqr","logBoard","openSquareRec","forEach","closedCount","isBombsNear","isWin","console","log","String","callback","dy","dx","Game","initBoard","getStatus","pages","Object","keys","Page","SomePage","App","handleMenuItemClick","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.4d25f44b.chunk.js","sourcesContent":["import React from 'react';\r\nimport './Menu.css';\r\n\r\nexport default class Menu extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { selected: -1 };\r\n\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick(e) {\r\n    for (let i = 0; i < e.target.parentNode.children.length; i++)\r\n      if (e.target === e.target.parentNode.children[i])\r\n        this.setState({ selected: i });\r\n\r\n    this.props.onItemClick(e.target.outerText);\r\n  }\r\n\r\n  render() {\r\n    const ids = this.props.ids.map((id, i) => {\r\n      let className = 'system-menu-item';\r\n\r\n      if (i === this.state.selected)\r\n        className += ' selected';\r\n\r\n      return <li key={i} className={className} onClick={this.handleClick}>{id}</li>\r\n    });\r\n\r\n    return (\r\n      <div className=\"system-menu-wrapper\">\r\n        <ul className=\"system-menu-container\">{ids}</ul>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Hello extends React.Component {\r\n  render() {\r\n    return <h1>Hello, world!</h1>;\r\n  }\r\n}\r\n","import React from 'react';\r\n\r\nexport default class Fox extends React.Component {\r\n  render() {\r\n    return <blockquote>The quick brown fox jump over a lazy dog.</blockquote>;\r\n  }\r\n}\r\n","/**\r\n * Статус игры\r\n * @readonly\r\n * @enum {number}\r\n */\r\nconst Status = {\r\n  running: 1,\r\n  lose: 2,\r\n  win: 3,\r\n}\r\n\r\nexport default Status;\r\n","const Difficulty = [{\r\n  id: 1,\r\n  name: 'Легкий',\r\n  options: {\r\n    width: '9',\r\n    height: '9',\r\n    bombsCount: '10',\r\n  },\r\n},{\r\n  id: 2,\r\n  name: 'Средний',\r\n  options: {\r\n    width: '16',\r\n    height: '16',\r\n    bombsCount: '40',\r\n  },\r\n},{\r\n  id: 3,\r\n  name: 'Сложный',\r\n  options: {\r\n    width: '30',\r\n    height: '16',\r\n    bombsCount: '99',\r\n  },\r\n}];\r\n\r\nexport default Difficulty;\r\n","import React from 'react';\r\n\r\nimport Status from './Status';\r\nimport Difficulty from './Difficulty';\r\n\r\nimport './Bar.css';\r\n\r\nexport default class Bar extends React.Component {\r\n  state = {\r\n    width: '9',\r\n    height: '9',\r\n    bombsCount: '10',\r\n    expanded: false,\r\n  }\r\n\r\n  handleRestartClick = e => {\r\n    const { width, height, bombsCount } = this.state;\r\n    this.props.onRestartClick({ width, height, bombsCount });\r\n\r\n    this.setState({ expanded: false });\r\n  }\r\n\r\n  handleOptionsClick = e => {\r\n    this.setState({ expanded: !this.state.expanded });\r\n  }\r\n\r\n  handleInputChange = e => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  }\r\n\r\n  handleSelectChange = e => {\r\n    const { width, height, bombsCount } = Difficulty.filter(it => it.id === +e.target.value)[0].options;\r\n    this.setState({ width, height, bombsCount });\r\n  }\r\n\r\n  render() {\r\n    let message = '';\r\n\r\n    switch (this.props.status) {\r\n      case Status.win:\r\n        message = 'Победа!';\r\n        break;\r\n      case Status.lose:\r\n        message = 'Игра окончена';\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    const expandable = 'expandable' + (this.state.expanded ? ' open' : '')\r\n\r\n    return (\r\n      <div className=\"bar\">\r\n        <div className=\"main\">\r\n          <div className=\"main-item button\" onClick={this.handleRestartClick}>↻</div>\r\n          <div className=\"main-item message\">{message}</div>\r\n          <div className=\"main-item button expander\" onClick={this.handleOptionsClick}>⚙</div>\r\n        </div>\r\n        <div className={expandable}>\r\n          <label>Пресет</label>\r\n          <select onChange={this.handleSelectChange}>\r\n          {Difficulty.map(it => (\r\n            <option key={it.id} value={it.id}>{it.name}</option>\r\n          ))}\r\n          </select>\r\n          <br/>\r\n          <label>Ширина поля</label>\r\n          <input type=\"text\" name=\"width\" value={this.state.width} onChange={this.handleInputChange}/>\r\n          <br/>\r\n          <label>Высота поля</label>\r\n          <input type=\"text\" name=\"height\" value={this.state.height} onChange={this.handleInputChange}/>\r\n          <br/>\r\n          <label>Количество бомб</label>\r\n          <input type=\"text\" name=\"bombsCount\" value={this.state.bombsCount} onChange={this.handleInputChange}/>\r\n          <br/>\r\n          <button onClick={this.handleRestartClick}>Принять</button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","const Icons = {\r\n  bomb: '💣',\r\n  mark: '❕',\r\n  helper: '❔',\r\n  exploded: '💥',\r\n}\r\n\r\nexport default Icons;","/**\r\n * Тип клика по ячейке\r\n * @readonly\r\n * @enum {number}\r\n */\r\nconst Click = {\r\n  openSquare: 1,\r\n  setMark: 2,\r\n  openNearSquares: 3,\r\n}\r\n\r\nexport default Click;\r\n","import React from 'react';\r\nimport Icons from './Icons';\r\nimport Click from './Click';\r\n\r\nimport './Square.css';\r\n\r\nexport default class Square extends React.Component {\r\n  handleContextMenu = e => {\r\n    e.preventDefault();\r\n  }\r\n\r\n  /* Нажатие ЛКМ и ПКМ одновременно используется для безопасного открытия ячеек.\r\n   * Разделение на onMouseDown и onMouseUp сделано для следующего:\r\n   * если была нажата одна из кнопок (1 - ЛКМ, 2 - ПКМ), то будет вызвано событие одной из этих кнопок,\r\n   * иначе будет считаться нажатие двух кнопок (3).\r\n   * Грубо говоря, игрок не проиграет, если даже случайно нажмет обе кнопки на клетку, где есть бомба. */\r\n\r\n  handleMouseDown = e => {\r\n    this.buttons = e.buttons;\r\n  }\r\n\r\n  handleMouseUp = e => {\r\n    if (!this.buttons) return;\r\n\r\n    switch (this.buttons) {\r\n      case 1:\r\n        this.props.onSquareClick(Click.openSquare, this.props);\r\n        break;\r\n      case 2:\r\n        this.props.onSquareClick(Click.setMark, this.props);\r\n        break;\r\n      case 3:\r\n        this.props.onSquareClick(Click.openNearSquares, this.props);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.buttons = null;\r\n  }\r\n\r\n  handleTouchStart = e => {\r\n    this._timeStamp = e.timeStamp;\r\n  }\r\n\r\n  handleTouchEnd = e => {\r\n    e.preventDefault();\r\n\r\n    const diff = e.timeStamp - this._timeStamp;\r\n\r\n    if (!this.props.isOpened && diff < 500)\r\n      this.props.onSquareClick(Click.openSquare, this.props);\r\n\r\n    if (!this.props.isOpened && diff >= 500)\r\n      this.props.onSquareClick(Click.setMark, this.props);\r\n\r\n    if (this.props.isOpened)\r\n      this.props.onSquareClick(Click.openNearSquares, this.props);\r\n  }\r\n\r\n  render() {\r\n    const className = ['square'];\r\n    let value = '';\r\n\r\n    if (this.props.isOpened) {\r\n      className.push('opened');\r\n\r\n      if (this.props.withBomb)\r\n        value = Icons.bomb;\r\n\r\n      if (this.props.nearBombsCount)\r\n        value = this.props.nearBombsCount;\r\n    } else {\r\n      if (this.props.isMarked)\r\n        value = Icons.mark;\r\n    }\r\n\r\n    return (\r\n      <div\r\n        className={className.join(' ')}\r\n        onContextMenu={this.handleContextMenu}\r\n        onMouseDown={this.handleMouseDown}\r\n        onMouseUp={this.handleMouseUp}\r\n        onTouchStart={this.handleTouchStart}\r\n        onTouchEnd={this.handleTouchEnd}\r\n      >\r\n        <div className=\"value\">\r\n          {value}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Square from './Square';\r\n\r\nimport './Board.css';\r\n\r\nexport default class Board extends React.Component {\r\n  handleSquareClick = (click, square) => {\r\n    this.props.onSquareClick(click, square);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"board\">\r\n        {this.props.data.map((row, y) => (\r\n          <div key={y} className=\"row\">\r\n            {row.map((square, x) => (\r\n              <Square\r\n                key={x}\r\n                x={square.x}\r\n                y={square.y}\r\n                withBomb={square.withBomb}\r\n                nearBombsCount={square.nearBombsCount}\r\n                isOpened={square.isOpened}\r\n                isMarked={square.isMarked}\r\n                onSquareClick={this.handleSquareClick}\r\n              />\r\n            ))}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Status from \"./Status\";\r\n\r\n/**\r\n * @typedef Square Ячейка\r\n * @property {number} x Координата X\r\n * @property {number} y Координата Y\r\n * @property {boolean} withBomb Есть бомба\r\n * @property {number} nearBombsCount Сколько рядом бомб\r\n * @property {boolean} isOpened Открыта ли\r\n * @property {boolean} isMarked Помечена ли\r\n */\r\n\r\n/**\r\n * Логика игры \"Сапер\"\r\n */\r\nexport default class Logic {\r\n  /**\r\n   * Создать новое поле и сгенерировать бомбы на ней\r\n   * @param {number} width Ширина\r\n   * @param {number} height Высота\r\n   * @param {number} bombsCount Количество бомб\r\n   * @returns {Square[][]} Поле\r\n   */\r\n  static initBoard(width, height, bombsCount) {\r\n    const board = Array(+height).fill()\r\n      .map((_, y) => Array(+width).fill()\r\n        .map((_, x) => ({\r\n          x, y,\r\n          withBomb: false,\r\n          nearBombsCount: 0,\r\n          isOpened: false,\r\n          isMarked: false,\r\n          })\r\n        )\r\n      )\r\n\r\n    for (let i = 0; i < +bombsCount; i++) {\r\n      const x = Math.floor(Math.random() * width);\r\n      const y = Math.floor(Math.random() * height);\r\n\r\n      if (!board[y][x].withBomb)\r\n        board[y][x].withBomb = true;\r\n      else\r\n        i--;\r\n    }\r\n\r\n    for (const row of board) {\r\n      for (const square of row) {\r\n        if (square.withBomb)\r\n          continue;\r\n\r\n        let count = 0;\r\n\r\n        doWithNearSquares(board, square, sqr => {\r\n          if (sqr.withBomb)\r\n            count++;\r\n        })\r\n\r\n        if (count)\r\n          square.nearBombsCount = count;\r\n      }\r\n    }\r\n\r\n    Logic.logBoard(board);\r\n\r\n    return board;\r\n  }\r\n\r\n  /**\r\n   * Открыть ячейку и, по возможности,\r\n   * все остальные рядом с ней, если они пустые.\r\n   * @param {Square[][]} board Поле\r\n   * @param {Square} square Выбранная ячейка\r\n   * @returns {Square[][] | null} Новое поле\r\n   */\r\n  static openSquare(board, square) {\r\n    if (square.isOpened)\r\n      return null;\r\n\r\n    board = board.map(row => row.map(sqr => sqr));\r\n    square = board[square.y][square.x];\r\n\r\n    openSquareRec(board, square);\r\n\r\n    if (square.isOpened && square.withBomb)\r\n      board.forEach(row => row.forEach(sqr => sqr.isOpened = true));\r\n\r\n    return board;\r\n  }\r\n\r\n  /**\r\n   * Поставить или снять метку на закрытую ячейку.\r\n   * @param {Square[][]} board Поле\r\n   * @param {Square} square Выбранная ячейка\r\n   * @returns {Square[][] | null} Новое поле\r\n   */\r\n  static setMark(board, square) {\r\n    if (square.isOpened)\r\n      return null;\r\n\r\n    board = board.map(row => row.map(sqr => sqr));\r\n    square = board[square.y][square.x];\r\n\r\n    square.isMarked = !square.isMarked;\r\n\r\n    return board;\r\n  }\r\n\r\n  /**\r\n   * Открыть соседние ячейки, если среди них нет бомб.\r\n   * @param {Square[][]} board Поле\r\n   * @param {Square} square Выбранная ячейка\r\n   * @returns {Square[][] | null} Новое поле\r\n   */\r\n  static openNearSquares(board, square) {\r\n    let closedCount = 0;\r\n    let isBombsNear = false; \r\n\r\n    doWithNearSquares(board, square, sqr => {\r\n      if (!sqr.isOpened && !sqr.isMarked)\r\n        closedCount++;\r\n      else\r\n        return;\r\n\r\n      if (sqr.withBomb)\r\n        isBombsNear = true;\r\n    });\r\n\r\n    if (!closedCount || isBombsNear)\r\n      return null;\r\n\r\n    board = board.map(row => row.map(sqr => sqr));\r\n\r\n    doWithNearSquares(board, square, sqr => {\r\n      if (!sqr.isOpened && !sqr.isMarked)\r\n        openSquareRec(board, sqr);\r\n    });\r\n\r\n    return board;\r\n  }\r\n\r\n  /**\r\n   * Получить статус игры\r\n   * @param {Square[][]} board Поле\r\n   * @param {Square} square Выбранная ячейка\r\n   * @returns {Status} Статус игры\r\n   */\r\n  static getStatus(board, square) {\r\n    let isWin = true;\r\n\r\n    for (const row of board) {\r\n      for (const square of row) {\r\n        if (!square.isOpened && !square.withBomb)\r\n          isWin = false;\r\n      }\r\n\r\n      if (!isWin)\r\n        break;\r\n    }\r\n\r\n    const isLose = square.isOpened && square.withBomb;\r\n\r\n    return (\r\n      isLose ? Status.lose :\r\n      isWin  ? Status.win  :\r\n      Status.running\r\n    );\r\n  }\r\n\r\n  /**\r\n   * Показать в консоли расположение бомб на поле.\r\n   * @param {Square[][]} board Поле\r\n   */\r\n  static logBoard(board) {\r\n    console.log(\r\n      board.map(row => (\r\n        row.map(square => {\r\n          if (square.withBomb)\r\n            return 'Q';\r\n\r\n          if (square.nearBombsCount)\r\n            return String(square.nearBombsCount);\r\n\r\n          return ' ';\r\n        })\r\n      ))\r\n    );\r\n  }\r\n}\r\n\r\n/**\r\n * С помощью рекурсии открыть все пустые ячейки\r\n * от выбранной до ячеек с количеством рядом находящихся бомб.\r\n * @param {Square[][]} board Поле\r\n * @param {Square} square Выбранная ячейка\r\n */\r\nfunction openSquareRec(board, square) {\r\n  if (square.isOpened || square.isMarked)\r\n    return;\r\n\r\n  square.isOpened = true;\r\n\r\n  if (square.withBomb || square.nearBombsCount)\r\n    return;\r\n\r\n  doWithNearSquares(board, square, sqr => (\r\n    openSquareRec(board, sqr)\r\n  ));\r\n};\r\n\r\n/**\r\n * @callback NearSquareCallback\r\n * @param {Square} square Выбранная ячейка\r\n */\r\n\r\n/**\r\n * Сделать что-то с ближайшими от выбранной ячейками \r\n * @param {Square[][]} board Поле\r\n * @param {Square} square Выбранная ячейка\r\n * @param {NearSquareCallback} callback Колбэк\r\n */\r\nfunction doWithNearSquares(board, square, callback) {\r\n  const { x, y } = square;\r\n\r\n  for (let dy = -1; dy <= 1; dy++) {\r\n    for (let dx = -1; dx <= 1; dx++) {\r\n      if (!(board[y + dy] && board[y + dy][x + dx]))\r\n        continue;\r\n\r\n      const sqr = board[y + dy][x + dx];\r\n\r\n      if (sqr.x === x && sqr.y === y)\r\n        continue;\r\n\r\n      callback(sqr);\r\n    }\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Bar from './Bar';\r\nimport Board from './Board';\r\n\r\nimport Logic from './Logic';\r\nimport Click from './Click';\r\nimport Status from './Status';\r\n\r\nimport './Game.css';\r\n\r\nexport default class Game extends React.Component {\r\n  state = {\r\n    board: Logic.initBoard(9, 9, 10),\r\n    status: Status.running,\r\n  };\r\n\r\n  handleRestartClick = ({ width, height, bombsCount }) => {\r\n    this.setState({\r\n      board: Logic.initBoard(width, height, bombsCount),\r\n      status: Status.running,\r\n    });\r\n  }\r\n\r\n  handleSquareClick = (click, square) => {\r\n    if (this.state.status !== Status.running) return;\r\n\r\n    let board;\r\n\r\n    switch (click) {\r\n      case Click.openSquare:\r\n        board = Logic.openSquare(this.state.board, square)\r\n        break;\r\n      case Click.setMark:\r\n        board = Logic.setMark(this.state.board, square)\r\n        break;\r\n      case Click.openNearSquares:\r\n        board = Logic.openNearSquares(this.state.board, square)\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    if (!board) return;\r\n\r\n    const status = Logic.getStatus(board, board[square.y][square.x]);\r\n\r\n    this.setState({ board, status });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <Bar status={this.state.status} onRestartClick={this.handleRestartClick}/>\r\n        <Board data={this.state.board} onSquareClick={this.handleSquareClick}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import Hello from './Hello';\r\nimport Fox from './Fox';\r\nimport Minesweeper from './Minesweeper';\r\n\r\nconst pages = {\r\n  'Hello': Hello,\r\n  'Fox': Fox,\r\n  'Minesweeper': Minesweeper,\r\n};\r\n\r\nconst ids = Object.keys(pages);\r\n\r\nexport { pages, ids };\r\n","import React from 'react';\r\nimport Game from \"./Game\";\r\n\r\nexport default class Minesweeper extends React.Component {\r\n  render() {\r\n    return <Game width=\"9\" height=\"9\" bombsCount=\"10\"/>;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { pages } from \"./pages\";\r\n\r\nexport default class Page extends React.Component {\r\n  render() {\r\n    const SomePage = pages[this.props.id];\r\n\r\n    if (!SomePage)\r\n      return null;\r\n\r\n    return <SomePage/>;\r\n  }\r\n}\r\n","import React from 'react';\r\nimport Menu from './Menu';\r\nimport Page from './Page';\r\nimport { ids } from \"./pages\";\r\n\r\nexport default class App extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = { id: '' };\r\n\r\n    this.handleMenuItemClick = this.handleMenuItemClick.bind(this);\r\n  }\r\n\r\n  handleMenuItemClick(id) {\r\n    if (this.state.id !== id)\r\n      this.setState({ id });\r\n  }\r\n\r\n  render() {\r\n    const id = this.state.id;\r\n\r\n    return (\r\n      <div>\r\n        <Menu ids={ids} onItemClick={this.handleMenuItemClick}/>\r\n        <Page id={id}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App/>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}